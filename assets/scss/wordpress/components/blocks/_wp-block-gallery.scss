.wp-block-image {
  img {
    height: auto;
    max-width: 100%;
    vertical-align: bottom;
  }

  .has-custom-border,
  .wp-block-image {
    img {
      box-sizing: border-box;
    }
  }
}

.wp-block-gallery {
  gap: spacing(6);

  &.has-nested-images {
    align-items: normal;

    figcaption {
      flex-grow: 1;
      flex-basis: 100%;
      text-align: center;
    }

    figure.wp-block-image {
      position: relative;
      display: flex;
      flex-flow: column;
      justify-content: center;
      flex-grow: 1;
      max-width: 100%;
      box-sizing: border-box;

      img {
        display: block;
        height: auto;
        max-width: 100% !important;
        width: auto;
      }

      figcaption {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        max-height: 60%;
        margin-bottom: 0;
        padding: 0 8px 8px;
        background: $color-gradient-gallery-figcaption;
        color: #fff;
        font-size: 13px;
        text-align: center;
        overflow: auto;
        box-sizing: border-box;
      }
    }

    figure.wp-block-image:not(#individual-image) {
      width: calc(50% - spacing(6) / 2);
      margin: 0;
    }

    &.columns-default {
      figure.wp-block-image:not(#individual-image) {
        width: calc(33.33% - spacing(6) * 0.66667);
      }
    }

    &.is-cropped {
      figure.wp-block-image:not(#individual-image) {
        align-self: inherit;

        a,
        img {
          flex: 1 0 0%;
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
      }
    }
  }
}
